<system>
Whenever proposing a new or updated file use the Markdown Code Block syntax. It's very important to place a file path in a comment on the top of the code block. Please show me the full code of the changed files—I have a disability which means I can't type and need to be able to copy and paste the full code. Don't use XML for files.
</system>
<files>
<file path="app/(tabs)/_layout.tsx">
<![CDATA[
import { Tabs } from "expo-router";
import { Home, Calendar, Infinity } from "lucide-react-native";
import React from "react";
import { Platform, StyleSheet, View } from "react-native";
import { BlurView } from "expo-blur";
import Colors from "@/constants/colors";

export default function TabLayout() {
  return (
    <Tabs
      screenOptions={{
        headerShown: false,
        tabBarStyle: styles.tabBar,
        tabBarActiveTintColor: Colors.accent.black,
        tabBarInactiveTintColor: Colors.text.tertiary,
        tabBarShowLabel: false,
        tabBarBackground: () => (
          Platform.OS === 'ios' ? (
            <BlurView intensity={80} style={StyleSheet.absoluteFill} tint="light" />
          ) : (
            <View style={[StyleSheet.absoluteFill, { backgroundColor: 'rgba(255, 255, 255, 0.9)' }]} />
          )
        ),
      }}
    >
      <Tabs.Screen
        name="index"
        options={{
          tabBarIcon: ({ color, size }) => <Home color={color} size={size} />,
        }}
      />
      <Tabs.Screen
        name="chat"
        options={{
          tabBarIcon: ({ color, size }) => (
            <View style={styles.centerIconContainer}>
              <View style={styles.centerIconBackground}>
                <Infinity color={color} size={size * 1.2} strokeWidth={2.5} />
              </View>
            </View>
          ),
        }}
      />
      <Tabs.Screen
        name="calendar"
        options={{
          tabBarIcon: ({ color, size }) => <Calendar color={color} size={size} />,
        }}
      />
    </Tabs>
  );
}

const styles = StyleSheet.create({
  tabBar: {
    position: 'absolute',
    borderTopWidth: 0,
    elevation: 0,
    height: 90,
    paddingBottom: 30,
  },
  centerIconContainer: {
    position: 'absolute',
    top: -15,
    justifyContent: 'center',
    alignItems: 'center',
  },
  centerIconBackground: {
    width: 70,
    height: 70,
    borderRadius: 35,
    backgroundColor: Colors.accent.white,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.15,
    shadowRadius: 12,
    elevation: 8,
  },
});

]]>
</file>
<file path="app/(tabs)/calendar.tsx">
<![CDATA[
import React, { useState } from "react";
import {
  StyleSheet,
  Text,
  View,
  ScrollView,
  TouchableOpacity,
} from "react-native";
import { LinearGradient } from "expo-linear-gradient";
import { useSafeAreaInsets } from "react-native-safe-area-context";
import Colors from "@/constants/colors";

const HOURS = Array.from({ length: 17 }, (_, i) => i + 6);

interface CalendarEvent {
  id: string;
  title: string;
  startHour: number;
  endHour: number;
  isAllDay: boolean;
}

const events: CalendarEvent[] = [
  {
    id: "1",
    title: "Loveable $20/m",
    startHour: 0,
    endHour: 0,
    isAllDay: true,
  },
];

export default function CalendarScreen() {
  const insets = useSafeAreaInsets();
  const [selectedDate, setSelectedDate] = useState(17);

  const getCurrentTime = () => {
    const now = new Date();
    return now.getHours() + now.getMinutes() / 60;
  };

  const currentTime = getCurrentTime();
  const weekDays = [
    { day: "Sun", date: 12 },
    { day: "Mon", date: 13 },
    { day: "Tue", date: 14 },
    { day: "Wed", date: 15 },
    { day: "Thu", date: 16 },
    { day: "Fri", date: 17 },
    { day: "Sat", date: 18 },
  ];

  return (
    <LinearGradient
      colors={[Colors.background.gradient.start, Colors.background.gradient.end]}
      style={styles.container}
    >
      <View style={[styles.header, { paddingTop: insets.top + 12 }]}>
        <View style={styles.dateHeader}>
          <Text style={styles.dateTitle}>October 17</Text>
          <TouchableOpacity style={styles.todayButton}>
            <Text style={styles.todayButtonText}>Today</Text>
          </TouchableOpacity>
        </View>
        <Text style={styles.daySubtitle}>Friday</Text>
      </View>

      <View style={styles.weekRow}>
        {weekDays.map((item) => (
          <TouchableOpacity
            key={item.date}
            style={styles.dayColumn}
            onPress={() => setSelectedDate(item.date)}
          >
            <Text
              style={[
                styles.dayText,
                selectedDate === item.date && styles.dayTextSelected,
              ]}
            >
              {item.day}
            </Text>
            <Text
              style={[
                styles.dateNumber,
                selectedDate === item.date && styles.dateNumberSelected,
              ]}
            >
              {item.date}
            </Text>
          </TouchableOpacity>
        ))}
      </View>

      <ScrollView
        style={styles.scrollView}
        showsVerticalScrollIndicator={false}
        contentContainerStyle={styles.scrollContent}
      >
        <View style={styles.allDaySection}>
          <Text style={styles.allDayLabel}>All Day</Text>
          {events
            .filter((e) => e.isAllDay)
            .map((event) => (
              <View key={event.id} style={styles.allDayEvent}>
                <Text style={styles.allDayEventText}>{event.title}</Text>
              </View>
            ))}
        </View>

        <View style={styles.timelineContainer}>
          {HOURS.map((hour) => {
            const isPM = hour >= 12;
            const displayHour = hour > 12 ? hour - 12 : hour === 0 ? 12 : hour;
            const period = isPM ? "PM" : "AM";
            const isCurrentHour = currentTime >= hour && currentTime < hour + 1;

            return (
              <View key={hour} style={styles.timeSlot}>
                <View style={styles.timeLabel}>
                  <Text style={styles.timeLabelText}>
                    {displayHour} {period}
                  </Text>
                </View>
                <View style={styles.timeSlotContent}>
                  {isCurrentHour && (
                    <View
                      style={[
                        styles.currentTimeLine,
                        {
                          top: `${((currentTime - hour) * 100)}%` as any,
                        },
                      ]}
                    >
                      <View style={styles.currentTimeDot} />
                      <View style={styles.currentTimeLineBar} />
                    </View>
                  )}
                </View>
              </View>
            );
          })}
        </View>

        <View style={{ height: 120 }} />
      </ScrollView>
    </LinearGradient>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  header: {
    paddingHorizontal: 24,
    paddingBottom: 16,
  },
  dateHeader: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 4,
  },
  dateTitle: {
    fontSize: 32,
    fontWeight: "700" as const,
    color: Colors.text.primary,
  },
  daySubtitle: {
    fontSize: 16,
    color: Colors.text.secondary,
  },
  todayButton: {
    backgroundColor: Colors.accent.black,
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 16,
  },
  todayButtonText: {
    fontSize: 14,
    fontWeight: "600" as const,
    color: Colors.accent.white,
  },
  weekRow: {
    flexDirection: "row",
    paddingHorizontal: 16,
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: "rgba(0, 0, 0, 0.05)",
  },
  dayColumn: {
    flex: 1,
    alignItems: "center",
    gap: 4,
  },
  dayText: {
    fontSize: 12,
    color: Colors.text.tertiary,
    fontWeight: "500" as const,
  },
  dayTextSelected: {
    color: Colors.text.primary,
    fontWeight: "600" as const,
  },
  dateNumber: {
    fontSize: 18,
    color: Colors.text.primary,
    fontWeight: "400" as const,
  },
  dateNumberSelected: {
    fontWeight: "700" as const,
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    paddingBottom: 40,
  },
  allDaySection: {
    paddingHorizontal: 24,
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: "rgba(0, 0, 0, 0.05)",
  },
  allDayLabel: {
    fontSize: 14,
    fontWeight: "600" as const,
    color: Colors.text.secondary,
    marginBottom: 8,
  },
  allDayEvent: {
    backgroundColor: Colors.accent.black,
    paddingVertical: 12,
    paddingHorizontal: 16,
    borderRadius: 12,
  },
  allDayEventText: {
    fontSize: 15,
    fontWeight: "600" as const,
    color: Colors.accent.white,
  },
  timelineContainer: {
    paddingTop: 8,
  },
  timeSlot: {
    height: 80,
    flexDirection: "row",
    paddingHorizontal: 24,
  },
  timeLabel: {
    width: 80,
    paddingTop: 4,
  },
  timeLabelText: {
    fontSize: 12,
    color: Colors.text.tertiary,
  },
  timeSlotContent: {
    flex: 1,
    borderTopWidth: 1,
    borderTopColor: "rgba(0, 0, 0, 0.05)",
    position: "relative",
  },
  currentTimeLine: {
    position: "absolute",
    left: 0,
    right: 0,
    flexDirection: "row",
    alignItems: "center",
    zIndex: 10,
  },
  currentTimeDot: {
    width: 12,
    height: 12,
    borderRadius: 6,
    backgroundColor: "#FF3B30",
    marginLeft: -6,
  },
  currentTimeLineBar: {
    flex: 1,
    height: 2,
    backgroundColor: "#FF3B30",
  },
});

]]>
</file>
<file path="app/(tabs)/chat.tsx">
<![CDATA[
import React, { useState, useEffect, useMemo } from "react";
import {
  StyleSheet,
  Text,
  View,
  ScrollView,
  TouchableOpacity,
  TextInput,
  KeyboardAvoidingView,
  Platform,
  ActivityIndicator,
} from "react-native";
import { LinearGradient } from "expo-linear-gradient";
import { useSafeAreaInsets } from "react-native-safe-area-context";
import { Clock, Paperclip, Mic, ArrowUp, Settings } from "lucide-react-native";
import { useLocalSearchParams } from "expo-router";
import Colors from "@/constants/colors";
import { useAxChatAgent } from "@/hooks/_useAxChatAgent";

const TAB_BAR_HEIGHT = 90;

const SUGGESTED_PROMPTS = [
  {
    id: "1",
    title: "Summarize my recent emails",
    description: "Get a quick overview of your latest messages",
  },
  {
    id: "2",
    title: "What emails do I have?",
    description: "Check your inbox for new messages",
  },
  {
    id: "3",
    title: "Check Today's Schedule",
    description: "Review your upcoming meetings and events",
  },
];

const AI_MODELS = [
  { id: "lfm2-350m", name: "Liquid LFM-2 350M (On-Device)", size: "350M" },
  { id: "apple-foundation", name: "Apple Foundation (On-Device)", size: "Small" },
  { id: "remote-ax", name: "Ax + Gemini (Tools Enabled)", size: "Cloud" },
];

export default function ChatScreen() {
  const insets = useSafeAreaInsets();
  const params = useLocalSearchParams();
  
  // ✅ Default to remote (Gemini + tools) so everything "just works" even if LFM native module isn't ready
  const [selectedModel, setSelectedModel] = useState<string>("remote-ax");
  
  const [input, setInput] = useState("");
  const [showModelSelector, setShowModelSelector] = useState(false);
  const [hasAutoSent, setHasAutoSent] = useState(false);

  const { messages, sendMessage, status } = useAxChatAgent();

  const bottomPadding = useMemo(() => Math.max(insets.bottom, 24), [insets.bottom]);
  const scrollContentStyle = useMemo(
    () => [styles.messagesContent, { paddingBottom: bottomPadding + TAB_BAR_HEIGHT + 24 }],
    [bottomPadding]
  );

  const handleSend = () => {
    if (input.trim()) {
      console.log("Sending message with model:", selectedModel);
      sendMessage(input, selectedModel);
      setInput("");
    }
  };

  useEffect(() => {
    if (params.autoPrompt && typeof params.autoPrompt === "string" && !hasAutoSent) {
      console.log("Auto-sending prompt:", params.autoPrompt);
      setHasAutoSent(true);
      setTimeout(() => {
        sendMessage(params.autoPrompt as string, selectedModel);
      }, 300);
    }
  }, [params.autoPrompt, hasAutoSent, sendMessage, selectedModel]);

  const handlePromptPress = (prompt: string) => {
    setInput(prompt);
  };

  return (
    <LinearGradient
      colors={[Colors.background.gradient.start, Colors.background.gradient.end]}
      style={styles.container}
    >
      <View style={[styles.header, { paddingTop: insets.top + 12 }]}>
        <TouchableOpacity style={styles.historyButton}>
          <Clock size={24} color={Colors.text.primary} />
        </TouchableOpacity>
        <Text style={styles.title}>AGI Chat</Text>
        <TouchableOpacity
          style={styles.settingsButton}
          onPress={() => setShowModelSelector(!showModelSelector)}
        >
          <Settings size={24} color={Colors.text.primary} />
        </TouchableOpacity>
      </View>

      {showModelSelector && (
        <View style={styles.modelSelector}>
          <Text style={styles.modelSelectorTitle}>Select AI Model</Text>
          {AI_MODELS.map((model) => (
            <TouchableOpacity
              key={model.id}
              style={[
                styles.modelOption,
                selectedModel === model.id && styles.modelOptionSelected,
              ]}
              onPress={() => {
                setSelectedModel(model.id);
                setShowModelSelector(false);
              }}
            >
              <View style={styles.modelInfo}>
                <Text
                  style={[
                    styles.modelName,
                    selectedModel === model.id && styles.modelNameSelected,
                  ]}
                >
                  {model.name}
                </Text>
                <Text
                  style={[
                    styles.modelSize,
                    selectedModel === model.id && styles.modelSizeSelected,
                  ]}
                >
                  {model.size}
                </Text>
              </View>
              {selectedModel === model.id && (
                <View style={styles.selectedIndicator} />
              )}
            </TouchableOpacity>
          ))}
        </View>
      )}

      <KeyboardAvoidingView
        style={styles.content}
        behavior={Platform.OS === "ios" ? "padding" : undefined}
        keyboardVerticalOffset={Platform.OS === "ios" ? 90 : 0}
      >
        <ScrollView
          style={styles.messagesContainer}
          contentContainerStyle={scrollContentStyle}
          showsVerticalScrollIndicator={false}
        >
          {messages.length === 0 ? (
            <View style={styles.emptyState}>
              <View style={styles.suggestedPrompts}>
                {SUGGESTED_PROMPTS.map((prompt) => (
                  <TouchableOpacity
                    key={prompt.id}
                    style={styles.promptCard}
                    onPress={() => handlePromptPress(prompt.title)}
                  >
                    <Text style={styles.promptTitle}>{prompt.title}</Text>
                    <Text style={styles.promptDescription}>
                      {prompt.description}
                    </Text>
                  </TouchableOpacity>
                ))}
              </View>
            </View>
          ) : (
            <View style={styles.messagesList}>
              {messages.map((message) => (
                <View key={message.id} style={styles.messageGroup}>
                  <Text style={styles.messageRole}>
                    {message.role === "user" ? "You" : "AGI Assistant"}
                  </Text>
                  {message.parts.map((part, index) => {
                    if (part.type === "text") {
                      return (
                        <View
                          key={`${message.id}-${index}`}
                          style={[
                            styles.messageBubble,
                            message.role === "user" && styles.userMessage,
                          ]}
                        >
                          <Text
                            style={[
                              styles.messageText,
                              message.role === "user" && styles.userMessageText,
                            ]}
                          >
                            {part.text}
                          </Text>
                        </View>
                      );
                    }
                    if (part.type === "tool") {
                      return (
                        <View
                          key={`${message.id}-${index}`}
                          style={styles.toolCall}
                        >
                          <Text style={styles.toolCallText}>
                            {part.state === "output-available"
                              ? `✓ ${part.toolName} completed`
                              : part.state === "output-error"
                              ? `✗ ${part.toolName} failed`
                              : `⟳ Running ${part.toolName}...`}
                          </Text>
                        </View>
                      );
                    }
                    return null;
                  })}
                </View>
              ))}
              {status === "sending" && (
                <View style={styles.loadingContainer}>
                  <ActivityIndicator size="small" color={Colors.text.secondary} />
                  <Text style={styles.loadingText}>Thinking...</Text>
                </View>
              )}
            </View>
          )}
        </ScrollView>

        <View
          style={[styles.inputContainer, { paddingBottom: bottomPadding, marginBottom: TAB_BAR_HEIGHT - 24 }]}
        >
          <View style={styles.inputRow}>
            <TouchableOpacity style={styles.attachButton}>
              <Paperclip size={22} color={Colors.text.secondary} />
            </TouchableOpacity>
            <TouchableOpacity style={styles.voiceButton}>
              <Mic size={22} color={Colors.text.secondary} />
            </TouchableOpacity>
            <TextInput
              style={styles.input}
              placeholder="What would you like to do?"
              placeholderTextColor={Colors.text.tertiary}
              value={input}
              onChangeText={setInput}
              multiline
              maxLength={500}
            />
            <TouchableOpacity
              style={[styles.sendButton, input.trim() && styles.sendButtonActive]}
              onPress={handleSend}
              disabled={!input.trim() || status === "sending"}
            >
              <ArrowUp
                size={20}
                color={input.trim() ? Colors.accent.white : Colors.text.tertiary}
                strokeWidth={2.5}
              />
            </TouchableOpacity>
          </View>
        </View>
      </KeyboardAvoidingView>
    </LinearGradient>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  header: {
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    paddingHorizontal: 24,
    paddingBottom: 16,
  },
  historyButton: {
    width: 40,
    height: 40,
    justifyContent: "center",
    alignItems: "center",
  },
  settingsButton: {
    width: 40,
    height: 40,
    justifyContent: "center",
    alignItems: "center",
  },
  title: {
    fontSize: 20,
    fontWeight: "700" as const,
    color: Colors.text.primary,
  },
  modelSelector: {
    backgroundColor: Colors.background.card,
    marginHorizontal: 24,
    marginBottom: 16,
    borderRadius: 20,
    padding: 16,
    shadowColor: Colors.background.cardShadow,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 1,
    shadowRadius: 8,
    elevation: 2,
  },
  modelSelectorTitle: {
    fontSize: 16,
    fontWeight: "600" as const,
    color: Colors.text.primary,
    marginBottom: 12,
  },
  modelOption: {
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    paddingVertical: 12,
    paddingHorizontal: 12,
    borderRadius: 12,
    marginBottom: 8,
    backgroundColor: "transparent",
  },
  modelOptionSelected: {
    backgroundColor: "rgba(0, 0, 0, 0.05)",
  },
  modelInfo: {
    flex: 1,
  },
  modelName: {
    fontSize: 15,
    fontWeight: "500" as const,
    color: Colors.text.primary,
    marginBottom: 2,
  },
  modelNameSelected: {
    fontWeight: "600" as const,
  },
  modelSize: {
    fontSize: 13,
    color: Colors.text.tertiary,
  },
  modelSizeSelected: {
    color: Colors.text.secondary,
  },
  selectedIndicator: {
    width: 8,
    height: 8,
    borderRadius: 4,
    backgroundColor: Colors.accent.black,
  },
  content: {
    flex: 1,
  },
  messagesContainer: {
    flex: 1,
  },
  messagesContent: {
    flexGrow: 1,
    paddingHorizontal: 24,
  },
  emptyState: {
    flex: 1,
    justifyContent: "center",
    paddingTop: 40,
  },
  suggestedPrompts: {
    gap: 12,
  },
  promptCard: {
    backgroundColor: Colors.background.card,
    borderRadius: 20,
    padding: 20,
    shadowColor: Colors.background.cardShadow,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 1,
    shadowRadius: 8,
    elevation: 2,
  },
  promptTitle: {
    fontSize: 16,
    fontWeight: "600" as const,
    color: Colors.text.primary,
    marginBottom: 6,
  },
  promptDescription: {
    fontSize: 14,
    color: Colors.text.secondary,
    lineHeight: 20,
  },
  messagesList: {
    paddingTop: 16,
    gap: 20,
  },
  messageGroup: {
    gap: 8,
  },
  messageRole: {
    fontSize: 13,
    fontWeight: "600" as const,
    color: Colors.text.secondary,
    marginBottom: 4,
  },
  messageBubble: {
    backgroundColor: Colors.background.card,
    borderRadius: 18,
    padding: 16,
    maxWidth: "85%",
    alignSelf: "flex-start",
  },
  userMessage: {
    backgroundColor: Colors.accent.black,
    alignSelf: "flex-end",
  },
  messageText: {
    fontSize: 15,
    color: Colors.text.primary,
    lineHeight: 22,
  },
  userMessageText: {
    color: Colors.accent.white,
  },
  toolCall: {
    backgroundColor: "rgba(0, 0, 0, 0.05)",
    borderRadius: 12,
    padding: 12,
    alignSelf: "flex-start",
  },
  toolCallText: {
    fontSize: 13,
    color: Colors.text.secondary,
    fontStyle: "italic" as const,
  },
  loadingContainer: {
    flexDirection: "row",
    alignItems: "center",
    gap: 8,
    paddingVertical: 12,
  },
  loadingText: {
    fontSize: 14,
    color: Colors.text.secondary,
    fontStyle: "italic" as const,
  },
  inputContainer: {
    paddingHorizontal: 24,
    paddingTop: 16,
  },
  inputRow: {
    flexDirection: "row",
    alignItems: "flex-end",
    backgroundColor: Colors.input.background,
    borderRadius: 24,
    paddingHorizontal: 16,
    paddingVertical: 10,
    shadowColor: Colors.background.cardShadow,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 1,
    shadowRadius: 8,
    elevation: 2,
  },
  attachButton: {
    padding: 6,
  },
  voiceButton: {
    padding: 6,
  },
  input: {
    flex: 1,
    fontSize: 16,
    color: Colors.text.primary,
    maxHeight: 100,
    paddingVertical: 8,
    paddingHorizontal: 12,
  },
  sendButton: {
    width: 32,
    height: 32,
    borderRadius: 16,
    backgroundColor: Colors.button.primary,
    justifyContent: "center",
    alignItems: "center",
  },
  sendButtonActive: {
    backgroundColor: Colors.accent.black,
  },
});

]]>
</file>
<file path="app/(tabs)/index.tsx">
<![CDATA[
import React, { useRef } from "react";
import { useSafeAreaInsets } from "react-native-safe-area-context";
import {
  StyleSheet,
  Text,
  View,
  ScrollView,
  TouchableOpacity,
  Animated,
  Dimensions,
} from "react-native";
import { useRouter } from "expo-router";
import { LinearGradient } from "expo-linear-gradient";
import { RefreshCw } from "lucide-react-native";
import { Image } from "expo-image";
import Colors from "@/constants/colors";

const { width } = Dimensions.get("window");

interface EventCard {
  id: string;
  status: "live" | "upcoming";
  time: string;
  title: string;
}

interface Suggestion {
  id: string;
  icon: string;
  title: string;
  description: string;
  actionText?: string;
  prompt: string;
}

const events: EventCard[] = [
  {
    id: "1",
    status: "live",
    time: "5:00 - 5:00 PM",
    title: "Loveable $20/m",
  },
];

const suggestions: Suggestion[] = [
  {
    id: "1",
    icon: "https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg",
    title: "Review unread messages from important senders requiring immediate action",
    description: "",
    prompt: "Check my unread emails for urgent requests, unanswered questions, or missing attachments that need my immediate attention",
  },
  {
    id: "2",
    icon: "https://www.gstatic.com/images/branding/product/1x/googleg_512dp.png",
    title: "Research attendees and prepare materials for upcoming important meetings",
    description: "",
    prompt: "Research attendees and prepare materials for upcoming important meetings",
  },
  {
    id: "3",
    icon: "https://upload.wikimedia.org/wikipedia/commons/a/a5/Google_Calendar_icon_%282020%29.svg",
    title: "Identify and resolve any scheduling conflicts in calendar",
    description: "",
    prompt: "Analyze my calendar for today and tomorrow to find any conflicts, back-to-back meetings, or events missing important details",
  },
  {
    id: "4",
    icon: "https://www.gstatic.com/images/branding/product/1x/googleg_512dp.png",
    title: "Complete promised actions and respond to waiting colleagues",
    description: "",
    prompt: "Complete promised actions and respond to waiting colleagues",
  },
];

export default function HomeScreen() {
  const scrollX = useRef(new Animated.Value(0)).current;
  const insets = useSafeAreaInsets();
  const router = useRouter();

  const handleSuggestionPress = (suggestion: Suggestion) => {
    console.log("Suggestion pressed:", suggestion.title);
    console.log("Auto-generating prompt:", suggestion.prompt);
    router.push({
      pathname: "/chat",
      params: { autoPrompt: suggestion.prompt },
    });
  };

  return (
    <LinearGradient
      colors={[Colors.background.gradient.start, Colors.background.gradient.end]}
      style={styles.container}
    >
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={[styles.scrollContent, { paddingTop: insets.top + 12 }]}
        showsVerticalScrollIndicator={false}
      >
        <View style={styles.header}>
          <View style={styles.profileSection}>
            <Image
              source={{ uri: "https://randomuser.me/api/portraits/men/1.jpg" }}
              style={styles.avatar}
            />
            <Text style={styles.greeting}>Good Afternoon, William</Text>
          </View>
        </View>

        <View style={styles.eventsSection}>
          <ScrollView
            horizontal
            pagingEnabled
            showsHorizontalScrollIndicator={false}
            onScroll={Animated.event(
              [{ nativeEvent: { contentOffset: { x: scrollX } } }],
              { useNativeDriver: false }
            )}
            scrollEventThrottle={16}
          >
            {events.map((event) => (
              <View key={event.id} style={styles.eventCardContainer}>
                <View style={styles.eventCard}>
                  <View style={styles.eventHeader}>
                    <View style={styles.liveStatusContainer}>
                      <View style={styles.liveDot} />
                      <Text style={styles.liveStatusText}>Live</Text>
                    </View>
                    <Text style={styles.eventTime}>{event.time}</Text>
                  </View>
                  <Text style={styles.eventTitle}>{event.title}</Text>
                  <TouchableOpacity style={styles.viewEventButton}>
                    <Text style={styles.viewEventButtonText}>View Event</Text>
                  </TouchableOpacity>
                </View>
              </View>
            ))}
          </ScrollView>

          <View style={styles.pagination}>
            {events.map((_, index) => {
              const inputRange = [
                (index - 1) * width,
                index * width,
                (index + 1) * width,
              ];

              const dotWidth = scrollX.interpolate({
                inputRange,
                outputRange: [8, 20, 8],
                extrapolate: "clamp",
              });

              const opacity = scrollX.interpolate({
                inputRange,
                outputRange: [0.3, 1, 0.3],
                extrapolate: "clamp",
              });

              return (
                <Animated.View
                  key={index}
                  style={[
                    styles.paginationDot,
                    {
                      width: dotWidth,
                      opacity,
                    },
                  ]}
                />
              );
            })}
          </View>
        </View>

        <View style={styles.suggestionsSection}>
          <View style={styles.sectionHeader}>
            <Text style={styles.sectionTitle}>Top of mind for you</Text>
            <TouchableOpacity style={styles.refreshButton}>
              <RefreshCw size={20} color={Colors.text.secondary} />
            </TouchableOpacity>
          </View>

          {suggestions.map((suggestion, index) => (
            <TouchableOpacity
              key={suggestion.id}
              style={styles.suggestionCard}
              onPress={() => handleSuggestionPress(suggestion)}
              activeOpacity={0.7}
            >
              <View style={styles.suggestionContent}>
                <View style={styles.suggestionIcon}>
                  <Image
                    source={{ uri: suggestion.icon }}
                    style={styles.iconImage}
                  />
                </View>
                <View style={styles.suggestionTextContainer}>
                  <Text style={styles.suggestionTitle}>{suggestion.title}</Text>
                  {suggestion.description ? (
                    <Text style={styles.suggestionDescription}>
                      {suggestion.description}
                    </Text>
                  ) : null}
                </View>
                {suggestion.actionText && (
                  <TouchableOpacity style={styles.actionButton}>
                    <Text style={styles.actionButtonText}>
                      {suggestion.actionText}
                    </Text>
                  </TouchableOpacity>
                )}
              </View>
            </TouchableOpacity>
          ))}
        </View>

        <View style={{ height: 120 }} />
      </ScrollView>
    </LinearGradient>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    paddingTop: 0,
  },
  header: {
    paddingHorizontal: 24,
    marginBottom: 24,
  },
  profileSection: {
    flexDirection: "row",
    alignItems: "center",
    gap: 12,
  },
  avatar: {
    width: 56,
    height: 56,
    borderRadius: 28,
  },
  greeting: {
    fontSize: 24,
    fontWeight: "600" as const,
    color: Colors.text.primary,
    flex: 1,
  },
  eventsSection: {
    marginBottom: 32,
  },
  eventCardContainer: {
    width: width,
    paddingHorizontal: 24,
  },
  eventCard: {
    backgroundColor: Colors.background.card,
    borderRadius: 24,
    padding: 24,
    shadowColor: Colors.background.cardShadow,
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 1,
    shadowRadius: 12,
    elevation: 4,
  },
  eventHeader: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 16,
  },
  liveStatusContainer: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: Colors.status.liveBackground,
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 16,
    gap: 6,
  },
  liveDot: {
    width: 8,
    height: 8,
    borderRadius: 4,
    backgroundColor: Colors.status.liveDot,
  },
  liveStatusText: {
    fontSize: 14,
    fontWeight: "600" as const,
    color: Colors.status.liveText,
  },
  eventTime: {
    fontSize: 16,
    color: Colors.text.secondary,
  },
  eventTitle: {
    fontSize: 32,
    fontWeight: "700" as const,
    color: Colors.text.primary,
    marginBottom: 24,
  },
  viewEventButton: {
    backgroundColor: Colors.button.primary,
    paddingVertical: 14,
    paddingHorizontal: 32,
    borderRadius: 20,
    alignSelf: "flex-start",
  },
  viewEventButtonText: {
    fontSize: 16,
    fontWeight: "600" as const,
    color: Colors.button.text,
  },
  pagination: {
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center",
    gap: 6,
    marginTop: 16,
  },
  paginationDot: {
    height: 8,
    borderRadius: 4,
    backgroundColor: Colors.accent.black,
  },
  suggestionsSection: {
    paddingHorizontal: 24,
  },
  sectionHeader: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 16,
  },
  sectionTitle: {
    fontSize: 20,
    fontWeight: "600" as const,
    color: Colors.text.primary,
  },
  refreshButton: {
    padding: 8,
  },
  suggestionCard: {
    backgroundColor: Colors.background.card,
    borderRadius: 20,
    padding: 20,
    marginBottom: 12,
    shadowColor: Colors.background.cardShadow,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 1,
    shadowRadius: 8,
    elevation: 2,
  },
  suggestionContent: {
    flexDirection: "row",
    alignItems: "flex-start",
    gap: 12,
  },
  suggestionIcon: {
    width: 44,
    height: 44,
    borderRadius: 22,
    backgroundColor: Colors.accent.white,
    justifyContent: "center",
    alignItems: "center",
    overflow: "hidden",
  },
  iconImage: {
    width: 28,
    height: 28,
  },
  suggestionTextContainer: {
    flex: 1,
    gap: 4,
  },
  suggestionTitle: {
    fontSize: 15,
    fontWeight: "600" as const,
    color: Colors.text.primary,
    lineHeight: 20,
  },
  suggestionDescription: {
    fontSize: 13,
    color: Colors.text.secondary,
    lineHeight: 18,
  },
  actionButton: {
    backgroundColor: Colors.accent.black,
    paddingVertical: 10,
    paddingHorizontal: 20,
    borderRadius: 16,
  },
  actionButtonText: {
    fontSize: 14,
    fontWeight: "600" as const,
    color: Colors.accent.white,
  },
});

]]>
</file>
</files>

<system>
Whenever proposing a new or updated file use the Markdown Code Block syntax. It's very important to place a file path in a comment on the top of the code block. Please show me the full code of the changed files—I have a disability which means I can't type and need to be able to copy and paste the full code. Don't use XML for files.
</system>